<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>JDK学习.md - Even - A super concise theme for Hugo</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="卢森林" /><meta name="description" content="目录 这里记录一下Java语言的新特性，以版本号区分。 介绍一些注解，一些注意Java语言的注意事项。 第二章-多线程 KLT和ULT 线程是调度CP" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.74.3 with theme even" />


<link rel="canonical" href="https://13277112287.github.io/post/jdk%E5%AD%A6%E4%B9%A0/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.8c3cbcb0324c2bb4875ceccba4007cbad4b4ac8377f33af9953c3e7684534a50.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="JDK学习.md" />
<meta property="og:description" content="目录 这里记录一下Java语言的新特性，以版本号区分。 介绍一些注解，一些注意Java语言的注意事项。 第二章-多线程 KLT和ULT 线程是调度CP" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://13277112287.github.io/post/jdk%E5%AD%A6%E4%B9%A0/" />
<meta property="article:published_time" content="2020-04-29T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-08-02T00:00:00+00:00" />
<meta itemprop="name" content="JDK学习.md">
<meta itemprop="description" content="目录 这里记录一下Java语言的新特性，以版本号区分。 介绍一些注解，一些注意Java语言的注意事项。 第二章-多线程 KLT和ULT 线程是调度CP">
<meta itemprop="datePublished" content="2020-04-29T00:00:00+00:00" />
<meta itemprop="dateModified" content="2020-08-02T00:00:00+00:00" />
<meta itemprop="wordCount" content="7741">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="JDK学习.md"/>
<meta name="twitter:description" content="目录 这里记录一下Java语言的新特性，以版本号区分。 介绍一些注解，一些注意Java语言的注意事项。 第二章-多线程 KLT和ULT 线程是调度CP"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">forest森林</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">主页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">时间轴</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">分类</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">forest森林</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">主页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">时间轴</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">分类</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">关于</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">JDK学习.md</h1>

      <div class="post-meta">
        <span class="post-time"> 2020-04-29 </span>
        <div class="post-category">
            <a href="/categories/java%E7%AC%94%E8%AE%B0/"> java笔记 </a>
            </div>
          <span class="more-meta"> 约 7741 字 </span>
          <span class="more-meta"> 预计阅读 16 分钟 </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#目录">目录</a></li>
    <li><a href="#第二章-多线程">第二章-多线程</a>
      <ul>
        <li>
          <ul>
            <li><a href="#klt和ult">KLT和ULT</a></li>
          </ul>
        </li>
        <li><a href="#线程池">线程池</a>
          <ul>
            <li><a href="#常用线程池讲解">常用线程池讲解</a></li>
            <li><a href="#线程池五种状态">线程池五种状态</a></li>
          </ul>
        </li>
        <li><a href="#定时任务">定时任务</a>
          <ul>
            <li><a href="#timertask">TimerTask</a></li>
            <li><a href="#scheduledexecutorservice">ScheduledExecutorService</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#第三章-jdk8新特性">第三章-JDK8新特性</a>
      <ul>
        <li><a href="#1接口默认方法">1接口默认方法</a></li>
        <li><a href="#2lambda">2Lambda</a></li>
        <li><a href="#3语法">3：：语法</a></li>
        <li><a href="#4stream流">4Stream流</a></li>
        <li><a href="#5函数接口">5函数接口</a></li>
        <li><a href="#6日期时间类">6日期时间类</a>
          <ul>
            <li><a href="#datecalendar">Date/Calendar</a></li>
            <li><a href="#日期时间包">日期时间包</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#第四章-其它">第四章-其它</a>
      <ul>
        <li><a href="#给方法加删除线">给方法加删除线</a></li>
        <li><a href="#abstract-interface">abstract interface</a></li>
        <li><a href="#1反射">1反射</a></li>
        <li><a href="#2泛型">2泛型</a></li>
        <li><a href="#3自定义注解">3自定义注解</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h1 id="目录">目录</h1>
<p>这里记录一下Java语言的新特性，以版本号区分。</p>
<p>介绍一些注解，一些注意Java语言的注意事项。</p>
<h1 id="第二章-多线程">第二章-多线程</h1>
<h3 id="klt和ult">KLT和ULT</h3>
<p>线程是调度CPU的最小单元，也叫轻量级进程LWP (Light Weight Process)</p>
<p>两种线程模型：</p>
<p><strong>内核级线程KLT</strong>（Kemel-Level Threads)</p>
<blockquote>
<ul>
<li>线程管理的所有工作（创建和撤销）由操作系统内核完成</li>
<li>操作系统内核提供一个应用程序设计接口API，供开发者使用KLT</li>
</ul>
<p>纯内核级线程特点：</p>
<p>进程中的一个线程被阻塞，内核能调度同一进程的其他线程（就绪态）占有处理器运行
多处理器环境中，内核能同时调度同一进程的多线程，将这些线程映射到不同的处理器核心上，提高进程的执行效率。
应用程序线程在用户态运行，线程调度和管理在内核实现。线程调度时，控制权从一个线程改变到另一线程，需要模式切换，系统开销较大。</p>
</blockquote>
<p><strong>用户级线程ULT</strong>（User-Level Threads ULT）</p>
<blockquote>
<p>线程切换不需要内核模式，能节省模式切换开销和内核资源。
允许进程按照特定的需要选择不同的调度算法来调度线程。调度算法需要自己实现。
由于其不需要内核进行支持，所以可以跨OS运行。
不能利用多核处理器有点，OS调度进程，每个进程仅有一个ULT能执行，一个ULT阻塞，将导致整个进程的阻塞。</p>
</blockquote>
<p>简单区分：</p>
<p><strong>用户线程(ULT)</strong>:用户程序实现，不依赖操作系统核心，应用提供创建、同步、调度和管理线程的函数来控制用户线
程。不需要用户态/核心态切换，速度快。内核对ULT无感知，线程阻塞则进程(包括它的所有线程)阻塞。</p>
<p><strong>内核线程(KLT)</strong>:系统内核管理线程(KLT)，内核保存线程的状态和上下文信息，线程阳塞不会引起进程阻塞。在多
处理器系统上，多线程在多处理器上并行运行。线程的创建、调度和管理由内核完成，效率比ULT要慢，比进程操
作快。</p>
<p>一句话区分，一个App若线程交给操作系统管理就是内核级线程KLT，若是交给APP自己管理就是用户级线程ULT。</p>
<h2 id="线程池">线程池</h2>
<p>Executors类可以创建各种线程池。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//压力测试 线程池 
</span><span class="c1"></span><span class="n">CyclicBarrier</span> <span class="n">cyclicBarrier</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CyclicBarrier</span><span class="o">(</span><span class="n">1000</span><span class="o">);</span>

<span class="n">ExecutorService</span> <span class="n">executorService</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="n">1000</span><span class="o">);</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span><span class="n">1000</span> <span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
  <span class="n">executorService</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="k">new</span> <span class="n">PressureThread</span><span class="o">(</span><span class="n">1</span><span class="o">,</span><span class="n">userMapper</span><span class="o">,</span><span class="n">redisTemplate</span><span class="o">,</span>
                                             <span class="n">cyclicBarrier</span><span class="o">));</span>
<span class="o">}</span>
<span class="n">executorService</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>

<span class="k">while</span><span class="o">(!</span><span class="n">executorService</span><span class="o">.</span><span class="na">isTerminated</span><span class="o">()){</span>
<span class="o">}</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;程序结束&#34;</span><span class="o">);</span>

<span class="c1">//线程中使用，让线程聚集在此一起运行
</span><span class="c1"></span><span class="n">cyclicBarrier</span><span class="o">.</span><span class="na">await</span><span class="o">();</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="常用线程池讲解">常用线程池讲解</h3>
<p>new ThreadPoolExecutor();</p>
<p>有五个参数：</p>
<ul>
<li>
<p>corePoolSize：核心线程数量</p>
</li>
<li>
<p>maximumPoolSize：线程池最大容量</p>
</li>
<li>
<p>keepAliveTime：非核心线程存活时间</p>
</li>
<li>
<p>TimeUnit：时间单位 (second /sek(ə)nd/ 秒)</p>
</li>
<li>
<p>BlockingQueue：阻塞队列，一旦线程池用完，任务讲进入阻塞队列。</p>
<p>在任意时刻，不管并发有多高，永远只有一个线程能够进行队列的入队或者出队操作! 线程安全的队列。</p>
<p>当队列满了，所有入队的操作都必须等待，也就是被阻塞。</p>
<p>当队列空了，所有出队的操作都必须等待，也就是被阻塞。</p>
</li>
<li></li>
<li>
<p>RejectedExecutionHandler 拒绝策略，可选参数，默认为AbortPolicy，队列满了之后再有任务，就会抛异常。</p>
</li>
</ul>
<p>poo.shutdown()和shutdownNow()区别</p>
<ul>
<li>shutdown（）不再接受新的任务，而是把原来任务执行完.</li>
<li>shutdownNow()不再接受新的任务，队列任务也不再执行，当前执行任务执行到安全点退出。</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"> <span class="n">ThreadPoolExecutor</span> <span class="n">pool</span><span class="o">=</span><span class="k">new</span> <span class="n">ThreadPoolExecutor</span>
   <span class="o">(</span> <span class="n">corePoolSize</span><span class="o">:</span> <span class="n">2</span><span class="o">,</span> <span class="n">maximumPoolSize</span><span class="o">:</span> <span class="n">3</span> <span class="o">,</span> <span class="n">keepAliveTime</span><span class="o">:</span> <span class="n">60</span><span class="o">,</span>
<span class="n">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">,</span> <span class="k">new</span> <span class="n">ArrayBlockingQueue</span><span class="o">&lt;</span><span class="n">Runnable</span><span class="o">&gt;(</span> <span class="n">capacity</span><span class="o">:</span> <span class="n">5</span><span class="o">));</span>
 <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">9</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
   <span class="n">pool</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="k">new</span> <span class="n">Task</span><span class="o">());</span><span class="c1">//使用线程池，要传入任务接口(必须实现Runnable/Callable接口)，
</span><span class="c1"></span>   <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="线程池五种状态">线程池五种状态</h3>
<p>Running
能接受新任务以及处理己添加的任务
Shutdown
不接受新任务，可以处理已经添加的任务
Stop
不接受新任务，不处理已经添加的任务，并且中断正在处理的任务
Tidying
所有的任务已经终止，ct1记录的”任务数量”为0，ctl负责记录线程池的运行状态与活动线程数量
Termi nated
线程池彻底终止，则线程池转变为terminated状态</p>
<h2 id="定时任务">定时任务</h2>
<h3 id="timertask">TimerTask</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 具体任务。
</span><span class="c1"></span>        <span class="n">TimerTask</span> <span class="n">task</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TimerTask</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="c1">// task to run goes here
</span><span class="c1"></span>                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Hello !!!&#34;</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">};</span>

        <span class="c1">// Timer类可以调度任务。 Timer实例可以调度多任务，它是线程安全的。
</span><span class="c1"></span>        <span class="n">Timer</span> <span class="n">timer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Timer</span><span class="o">();</span>
        <span class="kt">long</span> <span class="n">delay</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
        <span class="kt">long</span> <span class="n">intevalPeriod</span> <span class="o">=</span> <span class="n">1</span> <span class="o">*</span> <span class="n">1000</span><span class="o">;</span>
        <span class="c1">// schedules the task to be run in an interval
</span><span class="c1"></span>        <span class="n">timer</span><span class="o">.</span><span class="na">scheduleAtFixedRate</span><span class="o">(</span><span class="n">task</span><span class="o">,</span><span class="n">delay</span><span class="o">:</span><span class="n">0</span><span class="o">,</span> <span class="n">period</span><span class="o">:</span><span class="n">1000</span><span class="o">);</span>
 <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="scheduledexecutorservice">ScheduledExecutorService</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="o">{</span>
    <span class="n">ScheduledExecutorService</span>  <span class="n">pool</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ScheduledThreadPoolExecutor</span><span class="o">(</span><span class="n">4</span><span class="o">);</span>
        <span class="n">pool</span><span class="o">.</span><span class="na">scheduleAtFixedRate</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="c1">// task to run goes here
</span><span class="c1"></span>                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Hello !&#34;</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">},</span> <span class="n">2</span><span class="o">,</span> <span class="n">5</span><span class="o">,</span> <span class="n">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h1 id="第三章-jdk8新特性">第三章-JDK8新特性</h1>
<h2 id="1接口默认方法">1接口默认方法</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">interface</span> <span class="nc">Formula</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="nf">calculate</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">);</span>

    <span class="k">default</span> <span class="kt">double</span> <span class="nf">sqrt</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">Math</span><span class="o">.</span><span class="na">sqrt</span><span class="o">(</span><span class="n">a</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="2lambda">2Lambda</h2>
<p>(参数) -&gt; (lambda操作符)
一行代码可以直接写在()中
多行在()中加{}</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//正常写法
</span><span class="c1"></span><span class="n">Collections</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">names</span><span class="o">,</span> <span class="o">(</span><span class="n">String</span> <span class="n">a</span><span class="o">,</span> <span class="n">String</span> <span class="n">b</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">b</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">a</span><span class="o">);</span>
<span class="o">});</span>

</code></pre></td></tr></table>
</div>
</div><p>每一个lambda表达式都对应一个类型，通常是接口类型，而“函数式接口”是指仅仅只包含一个抽象方法的接口</p>
<h2 id="3语法">3：：语法</h2>
<p>类名：：方法名</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">表达式</span><span class="err">：</span><span class="n">person</span> <span class="o">-&gt;</span> <span class="n">person</span><span class="o">.</span><span class="na">getAge</span><span class="o">();</span>
<span class="n">使用双冒号</span><span class="err">：</span><span class="n">Person</span><span class="err">：：</span><span class="n">getAge</span>
  
  <span class="c1">////
</span><span class="c1"></span><span class="n">表达式</span><span class="err">：</span><span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;()</span>
<span class="nl">使用双冒号:</span> <span class="n">HsahMap</span> <span class="o">::</span> <span class="k">new</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="4stream流">4Stream流</h2>
<p>流(Stream) 到底是什么呢？
是数据渠道，用于操作数据源（集合、数组等）所生成的元素序列。
“集合讲的是数据，流讲的是计算！”</p>
<blockquote>
<p><strong>生成</strong></p>
<ul>
<li><strong>stream()</strong> − 为集合创建串行流。</li>
<li><strong>parallelStream()</strong> − 为集合创建并行流。</li>
</ul>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"> <span class="n">User</span> <span class="n">u1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">(</span><span class="n">11</span><span class="o">,</span><span class="s">&#34;a&#34;</span><span class="o">,</span><span class="n">23</span><span class="o">);</span>
   <span class="n">User</span> <span class="n">u2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">(</span><span class="n">12</span><span class="o">,</span><span class="s">&#34;b&#34;</span><span class="o">,</span><span class="n">24</span><span class="o">);</span>
   <span class="n">User</span> <span class="n">u3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">(</span><span class="n">13</span><span class="o">,</span><span class="s">&#34;c&#34;</span><span class="o">,</span><span class="n">22</span><span class="o">);</span>
   <span class="n">User</span> <span class="n">u4</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">(</span><span class="n">14</span><span class="o">,</span><span class="s">&#34;d&#34;</span><span class="o">,</span><span class="n">28</span><span class="o">);</span>
   <span class="n">User</span> <span class="n">u5</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">(</span><span class="n">16</span><span class="o">,</span><span class="s">&#34;e&#34;</span><span class="o">,</span><span class="n">26</span><span class="o">);</span>

   <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">u1</span><span class="o">,</span><span class="n">u2</span><span class="o">,</span><span class="n">u3</span><span class="o">,</span><span class="n">u4</span><span class="o">,</span><span class="n">u5</span><span class="o">);</span>

   <span class="n">list</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">filter</span><span class="o">(</span><span class="n">p</span> <span class="o">-&gt;</span> <span class="o">{</span>
       <span class="k">return</span> <span class="n">p</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">%</span> <span class="n">2</span> <span class="o">==</span> <span class="n">0</span><span class="o">;</span>
   <span class="o">}).</span><span class="na">filter</span><span class="o">(</span><span class="n">p</span> <span class="o">-&gt;</span> <span class="o">{</span>
       <span class="k">return</span> <span class="n">p</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">24</span><span class="o">;</span>
   <span class="o">}).</span><span class="na">map</span><span class="o">(</span><span class="n">f</span> <span class="o">-&gt;</span> <span class="o">{</span>
       <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="na">getUserName</span><span class="o">().</span><span class="na">toUpperCase</span><span class="o">();</span>
   <span class="o">}).</span><span class="na">sorted</span><span class="o">((</span><span class="n">o1</span><span class="o">,</span> <span class="n">o2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
       <span class="k">return</span> <span class="n">o2</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">o1</span><span class="o">);</span>
   <span class="o">}).</span><span class="na">limit</span><span class="o">(</span><span class="n">1</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="5函数接口">5函数接口</h2>
<p><img src="/typoraImg/JDK%E5%AD%A6%E4%B9%A0.assets/image-20200716211752880.png" alt="image-20200716211752880"></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">        <span class="c1">//R apply(T t);函数型接口，一个参数，一个返回值
</span><span class="c1"></span>        <span class="n">Function</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">function</span> <span class="o">=</span> <span class="n">t</span> <span class="o">-&gt;{</span><span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="na">length</span><span class="o">();};</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">function</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="s">&#34;abcd&#34;</span><span class="o">));</span>

<span class="c1">//boolean test(T t);断定型接口，一个参数，返回boolean
</span><span class="c1"></span>        <span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">predicate</span> <span class="o">=</span> <span class="n">t</span><span class="o">-&gt;{</span><span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&#34;a&#34;</span><span class="o">);};</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">predicate</span><span class="o">.</span><span class="na">test</span><span class="o">(</span><span class="s">&#34;a&#34;</span><span class="o">));</span>

<span class="c1">// void accept(T t);消费型接口，一个参数，没有返回值
</span><span class="c1"></span>        <span class="n">Consumer</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">consumer</span> <span class="o">=</span> <span class="n">t</span><span class="o">-&gt;{</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">};</span>
        <span class="n">consumer</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="s">&#34;javaXXXX&#34;</span><span class="o">);</span>

<span class="c1">//T get(); 供给型接口，无参数，有返回值
</span><span class="c1"></span>        <span class="n">Supplier</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">supplier</span> <span class="o">=()-&gt;{</span><span class="k">return</span> <span class="n">UUID</span><span class="o">.</span><span class="na">randomUUID</span><span class="o">().</span><span class="na">toString</span><span class="o">();};</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">supplier</span><span class="o">.</span><span class="na">get</span><span class="o">());</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="6日期时间类">6日期时间类</h2>
<h3 id="datecalendar">Date/Calendar</h3>
<p>1Date  2Calendar</p>
<p><strong>一Date类(历史悠久) 月份与小时从0开始,天数从1开始,年从1900开始</strong></p>
<p>Date()的构造函数，仅有两个推荐使用。</p>
<ul>
<li>Date()：生成一个代表当前日期时间的 Date 对象。该构造器在底层调用 System.currentTimeMillis() 获得 long 整数作为日期参数。</li>
<li>Date(long date)：根据指定的 long 型整数来生成一个 Date 对象。该构造器的参数表示创建的 Date 对象和 GMT 1970 年 1 月 1 日 00:00:00 之间的时间差，以毫秒作为计时单位。</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//获取当前时间
</span><span class="c1"></span><span class="n">Date</span> <span class="n">d</span><span class="o">=</span><span class="k">new</span> <span class="n">Date</span><span class="o">();</span>

<span class="c1">//获取当前时间一百秒后的时间
</span><span class="c1"></span><span class="n">Date</span> <span class="n">d2</span><span class="o">=</span><span class="k">new</span> <span class="n">Date</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()+</span><span class="n">100</span><span class="o">);</span>

<span class="c1">//比较时间d是否在d2之前  true
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">d</span><span class="o">.</span><span class="na">before</span><span class="o">(</span><span class="n">d2</span><span class="o">));</span>

<span class="c1">//比较时间先后顺序,若在此之前则返回-1,若相等则返回0,否则返回1
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">d</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">d2</span><span class="o">));</span>
</code></pre></td></tr></table>
</div>
</div><p>**二.Calendar类 ** ==月最大为11==</p>
<p><strong>①抽象类</strong></p>
<p><strong>②不能直接实例化</strong></p>
<p>Calendar和Date都是表示日期的工具类，可以直接自由转换。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="o">==========</span> <span class="n">Calendar</span><span class="o">--&gt;</span><span class="n">Date</span> <span class="o">=======</span>
<span class="c1">//创建一个默认的Calendar对象
</span><span class="c1"></span><span class="n">Calendar</span> <span class="n">calendar</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="c1">//从Calendar对象中取出Date对象
</span><span class="c1">//注意毫秒会四舍五入 若想让毫秒为0 calendar.set(Calendar.MILLISECOND,0)
</span><span class="c1"></span><span class="n">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">getTime</span><span class="o">();</span>

<span class="o">===========</span> <span class="n">Date</span><span class="o">--&gt;</span><span class="n">Calendar</span> <span class="o">=========</span>
<span class="c1">//通过Date对象获得对应的calendar对象
</span><span class="c1">//因为没有构造函数可以接收Date对象
</span><span class="c1">//所以必须先获得一个calendar实例，然后调用其setTime()方法
</span><span class="c1"></span><span class="n">Calendar</span> <span class="n">calendar2</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="n">calendar2</span><span class="o">.</span><span class="na">setTime</span><span class="o">(</span><span class="n">date</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>Calendar 类提供了大量访问、修改日期时间的方法，常用方法如下。</p>
<ul>
<li>void add(int field, int amount)：根据日历的规则，为给定的日历字段添加或减去指定的时间量。</li>
<li>int get(int field）：返回指定日历字段的值。</li>
<li>int getActualMaximum(int field)：返回指定日历字段可能拥有的最大值。例如月，最大值为11。</li>
<li>int getActualMinimum(int field)：返回指定日历字段可能拥有的最小值。例如月，最小值为0。</li>
<li>void roll(int field, int amount)：与 add() 方法类似，区别在于加上 amount 后超过了该字段所能表示的最大范围时，也不会向上一个字段进位。</li>
<li>void set(int field, int value)：将给定的日历字段设置为给定值。</li>
<li>void set(int year, int month，int day)：设置 Calendar 对象的年、月、日三个字段的值。</li>
<li>void set(int year, int month，int day, int hourOfDay, int minute, int second)：设置 Calendar 对象的年、月、日、时、分、秒6个字段的值。</li>
</ul>
<p>上面的很多方法都需要一个 int 类型的 field 参数，field 是 Calendar 类的类变量，如 Calendar.YEAR、Calendar.MONTH 等分别代表了年、月、日、小时、分钟、秒等时间字段。需要指出的是，Calendar.MONTH 字段代表月份，月份的起始值不是1，而是0，所以要设置8月时，用7而不是8。如下程序示范了Calendar 类的常规用法。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"> <span class="n">Calendar</span> <span class="n">c</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="c1">// 取出年
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">YEAR</span><span class="o">));</span>

<span class="c1">// 取出月份
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">MONTH</span><span class="o">));</span>

<span class="c1">// 取出日
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">DATE</span><span class="o">));</span>

<span class="c1">//获得本月最大天
</span><span class="c1"></span><span class="n">instance</span><span class="o">.</span><span class="na">getActualMaximum</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">DATE</span><span class="o">)</span>
  
<span class="c1">// 分别设置年、月、日、小时、分钟、秒
</span><span class="c1"></span><span class="n">c</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">2003</span><span class="o">,</span> <span class="n">10</span><span class="o">,</span> <span class="n">23</span><span class="o">,</span> <span class="n">12</span><span class="o">,</span> <span class="n">32</span><span class="o">,</span> <span class="n">23</span><span class="o">);</span> <span class="c1">// 2003-11-23 12:32:23
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>

<span class="c1">// 将Calendar的年前推1年
</span><span class="c1"></span><span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">YEAR</span><span class="o">,</span> <span class="o">-</span><span class="n">1</span><span class="o">);</span> <span class="c1">// 2002-11-23 12:32:23
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>

<span class="c1">// 将Calendar的月前推8个月
</span><span class="c1"></span><span class="n">c</span><span class="o">.</span><span class="na">roll</span><span class="o">(</span><span class="n">MONTH</span><span class="o">,</span> <span class="o">-</span><span class="n">8</span><span class="o">);</span> <span class="c1">// 2002-03-23 12:32:23
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>add和roll区别</p>
<hr>
<p><strong>add</strong>(int field, int amount) 的功能非常强大，add 主要用于改变 Calendar 的特定字段的值。如果需要增加某字段的值，则让 amount 为正数；如果需要减少某字段的值，则让 amount 为负数即可。</p>
<p>当被修改的字段超出它允许的范围时，会发生进位，即上一级字段也会增大。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">Calendar</span> <span class="n">cal1</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="n">cal1</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">2003</span><span class="o">,</span> <span class="n">7</span><span class="o">,</span> <span class="n">23</span><span class="o">,</span> <span class="n">0</span><span class="o">,</span> <span class="n">0</span><span class="o">,</span> <span class="n">0</span><span class="o">);</span> <span class="c1">// 2003-8-23
</span><span class="c1"></span><span class="n">cal1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">MONTH</span><span class="o">,</span> <span class="n">6</span><span class="o">);</span> <span class="c1">// 2003-8-23 =&gt; 2004-2-23
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">cal1</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>

<span class="c1">//若下一字段也需要改变，也会改变
</span><span class="c1"></span><span class="n">Calendar</span> <span class="n">cal2</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="n">cal2</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">2003</span><span class="o">,</span> <span class="n">7</span><span class="o">,</span> <span class="n">31</span><span class="o">,</span> <span class="n">0</span><span class="o">,</span> <span class="n">0</span><span class="o">,</span> <span class="n">0</span><span class="o">);</span> <span class="c1">// 2003-8-31
</span><span class="c1">// 因为进位到后月份改为2月，2月没有31日，自动变成29日
</span><span class="c1"></span><span class="n">cal2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">MONTH</span><span class="o">,</span> <span class="n">6</span><span class="o">);</span> <span class="c1">// 2003-8-31 =&gt; 2004-2-29
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">cal2</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
</code></pre></td></tr></table>
</div>
</div><p>==roll不会改变其它字段==</p>
</blockquote>
<p>容错性：cal.setLenient(false);默认Calendar是容错的，使用这个代码可以把容错性关闭。这样设置月份为13时就会报错。</p>
<h3 id="日期时间包">日期时间包</h3>
<p>Java 8 开始专门新增了一个 java.time 包，该包下包含了如下常用的类。</p>
<ul>
<li>
<p>Clock：该类用于获取指定时区的当前日期、时间。该类可取代 System 类的 currentTimeMillis() 方法，而且提供了更多方法来获取当前日期、时间。该类提供了大量静态方法来获取 Clock 对象。</p>
</li>
<li>
<p>Duration：该类代表持续时间。该类可以非常方便地获取一段时间。</p>
</li>
<li>
<p>Instant：代表一个具体的时刻，可以精确到纳秒。该类提供了静态的 now() 方法来获取当前时刻，也提供了静态的 now(Clock ck) 方法来获取 clock 对应的时刻。除此之外，它还提供了一系列 minusXxx() 方法在当前时刻基础上减去一段时间，也提供了 plusXxx() 方法在当前时刻基础上加上一段时间。</p>
</li>
<li>
<p>LocalDate：该类代表不带时区的日期，例如 2007-12-03。该类提供了静态的 now() 方法来获取当前日期，也提供了静态的 now(Clock clock) 方法来获取 clock 对应的日期：除此之外，它还提供了 minusXxx() 方法在当前年份基础上减去几年、几月、几周或几日等，也提供了 plusXxx() 方法在当前年份基础上加上几年、几月、几周或几日等。==年月天正常==</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"> <span class="n">LocalDate</span> <span class="n">localDate</span> <span class="o">=</span> <span class="n">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
<span class="n">LocalTime</span> <span class="n">localTime</span> <span class="o">=</span> <span class="n">LocalTime</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
<span class="n">LocalDateTime</span> <span class="n">localDateTime</span> <span class="o">=</span> <span class="n">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;localDate=&#34;</span><span class="o">+</span><span class="n">localDate</span><span class="o">);</span>         <span class="c1">//localDate=2019-09-16
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;localTime=&#34;</span><span class="o">+</span><span class="n">localTime</span><span class="o">);</span>         <span class="c1">//localTime=10:11:01.625851400
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;localDateTime=&#34;</span><span class="o">+</span><span class="n">localDateTime</span><span class="o">);</span> <span class="c1">//localDateTime=2019-09-16T10:11:01.625851400
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;localDate=&#34;</span><span class="o">+</span><span class="n">localDate</span><span class="o">.</span><span class="na">getDayOfWeek</span><span class="o">().</span><span class="na">getValue</span><span class="o">());</span>         <span class="c1">//获取星期几
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;localDate=&#34;</span><span class="o">+</span><span class="n">localDate</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">ChronoField</span><span class="o">.</span><span class="na">ALIGNED_WEEK_OF_MONTH</span><span class="o">));</span>         <span class="c1">//获取当前月的第几周
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">localDate</span><span class="o">.</span><span class="na">getDayOfYear</span><span class="o">());</span>            <span class="c1">//获取本年中截止到今天已经过去的天数
</span><span class="c1"></span>  
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">localDate</span><span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">TemporalAdjusters</span><span class="o">.</span><span class="na">firstDayOfMonth</span><span class="o">()));</span>  <span class="c1">//得到所在月的第一天
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">localDate</span><span class="o">.</span><span class="na">withDayOfMonth</span><span class="o">(</span><span class="n">2</span><span class="o">));</span>  <span class="c1">//得到所在月的第二天
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">localDate</span><span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">TemporalAdjusters</span><span class="o">.</span><span class="na">lastDayOfMonth</span><span class="o">()));</span>  <span class="c1">//得到所在月的最后一天
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">localDate</span><span class="o">.</span><span class="na">plusDays</span><span class="o">(</span><span class="n">20</span><span class="o">));</span>  <span class="c1">//得到20天后的日期
</span><span class="c1"></span>  
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>LocalTime：该类代表不带时区的时间，例如 10:15:30。该类提供了静态的 now() 方法来获取当前时间，也提供了静态的 now(Clock clock) 方法来获取 clock 对应的时间。除此之外，它还提供了 minusXxx() 方法在当前年份基础上减去几小时、几分、几秒等，也提供了 plusXxx() 方法在当前年份基础上加上几小时、几分、几秒等。</p>
</li>
<li>
<p>LocalDateTime：该类代表不带时区的日期、时间，例如2007-12-03T10:15:30。该类提供了静态的 now() 方法来获取当前日期、时间，也提供了静态的 now(Clock ck) 方法来获取 clock 对应的日期、时间。除此之外，它还提供了 minusXxx() 方法在当前年份基础上减去几年、几月、几日、几小时、几分、几秒等，也提供了 plusXxx() 方法在当前年份基础上加上几年、几月、几日、几小时、几分、几秒等。</p>
</li>
<li>
<p>MonthDay：该类仅代表月日，例如&ndash;04-12。该类提供了静态的 now() 方法来获取当前月日，也提供了静态的 now(Clock ck) 方法来获取 clock 对应的月日。</p>
</li>
<li>
<p>Year：该类仅代表年，例如2014。该类提供了静态的 now() 方法来获取当前年份，也提供了静态的 now(Clock clock) 方法来获取 clock 对应的年份。除此之外，它还提供了 minusYears() 方法在当前年份基础上减去几年，也提供了 plusYears() 方法在当前年份基础上加上几年。</p>
</li>
<li>
<p>YearMonth：该类仅代表年月，例如2014-04。该类提供了静态的 now() 方法来获取当前年月，也提供了静态的 now(Clock ck) 方法来获取 clock 对应的年月。除此之外，它还提供了 minusXxx() 方法在当前年月基础上减去几年、几月，也提供了 plusXxx() 方法在当前年月基础上加上几年、几月。</p>
<ul>
<li>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//以字符串构建YearMonth对象
</span><span class="c1"></span><span class="n">YearMonth</span> <span class="n">yearMonth</span><span class="o">=</span><span class="n">YearMonth</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">&#34;2020-12&#34;</span><span class="o">)</span>
      
<span class="c1">//其月份为1-12 ，在使用其构建Canlendar和Date时
</span><span class="c1">//注意月份-1  
</span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
<li>
<p>ZonedDateTime：该类代表一个时区化的日期、时间。</p>
</li>
<li>
<p>ZoneId：该类代表一个时区。</p>
</li>
<li>
<p>DayOfWeek：这是一个枚举类，定义了周日到周六的枚举值。</p>
</li>
<li>
<p>Month：这也是一个枚举类，定义了一月到十二月的枚举值。</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">java.time.*</span><span class="o">;</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NewDatePackageTest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// -----下面是关于Clock的用法-----
</span><span class="c1"></span>        <span class="c1">// 获取当前Clock
</span><span class="c1"></span>        <span class="n">Clock</span> <span class="n">clock</span> <span class="o">=</span> <span class="n">Clock</span><span class="o">.</span><span class="na">systemUTC</span><span class="o">();</span>
        <span class="c1">// 通过Clock获取当前时刻
</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;当前时刻为：&#34;</span> <span class="o">+</span> <span class="n">clock</span><span class="o">.</span><span class="na">instant</span><span class="o">());</span>
        <span class="c1">// 获取clock对应的毫秒数，与System.currentTimeMillis()输出相同
</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">clock</span><span class="o">.</span><span class="na">millis</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">());</span>
        <span class="c1">// -----下面是关于Duration的用法-----
</span><span class="c1"></span>        <span class="n">Duration</span> <span class="n">d</span> <span class="o">=</span> <span class="n">Duration</span><span class="o">.</span><span class="na">ofSeconds</span><span class="o">(</span><span class="n">6000</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;6000秒相当于&#34;</span> <span class="o">+</span> <span class="n">d</span><span class="o">.</span><span class="na">toMinutes</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;分&#34;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;6000秒相当于&#34;</span> <span class="o">+</span> <span class="n">d</span><span class="o">.</span><span class="na">toHours</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;小时&#34;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;6000秒相当于&#34;</span> <span class="o">+</span> <span class="n">d</span><span class="o">.</span><span class="na">toDays</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;天&#34;</span><span class="o">);</span>
        <span class="c1">// 在clock基础上增加6000秒，返回新的Clock
</span><span class="c1"></span>        <span class="n">Clock</span> <span class="n">clock2</span> <span class="o">=</span> <span class="n">Clock</span><span class="o">.</span><span class="na">offset</span><span class="o">(</span><span class="n">clock</span><span class="o">,</span> <span class="n">d</span><span class="o">);</span>
        <span class="c1">// 可看到clock2与clock1相差1小时40分
</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;当前时刻加6000秒为：&#34;</span> <span class="o">+</span> <span class="n">clock2</span><span class="o">.</span><span class="na">instant</span><span class="o">());</span>
        <span class="c1">// -----下面是关于Instant的用法-----
</span><span class="c1"></span>        <span class="c1">// 获取当前时间
</span><span class="c1"></span>        <span class="n">Instant</span> <span class="n">instant</span> <span class="o">=</span> <span class="n">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">instant</span><span class="o">);</span>
        <span class="c1">// instant添加6000秒（即100分钟），返回新的Instant
</span><span class="c1"></span>        <span class="n">Instant</span> <span class="n">instant2</span> <span class="o">=</span> <span class="n">instant</span><span class="o">.</span><span class="na">plusSeconds</span><span class="o">(</span><span class="n">6000</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">instant2</span><span class="o">);</span>
        <span class="c1">// 根据字符串中解析Instant对象
</span><span class="c1"></span>        <span class="n">Instant</span> <span class="n">instant3</span> <span class="o">=</span> <span class="n">Instant</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">&#34;2014-02-23T10:12:35.342Z&#34;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">instant3</span><span class="o">);</span>
        <span class="c1">// 在instant3的基础上添加5小时4分钟
</span><span class="c1"></span>        <span class="n">Instant</span> <span class="n">instant4</span> <span class="o">=</span> <span class="n">instant3</span><span class="o">.</span><span class="na">plus</span><span class="o">(</span><span class="n">Duration</span><span class="o">.</span><span class="na">ofHours</span><span class="o">(</span><span class="n">5</span><span class="o">).</span><span class="na">plusMinutes</span><span class="o">(</span><span class="n">4</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">instant4</span><span class="o">);</span>
        <span class="c1">// 获取instant4的5天以前的时刻
</span><span class="c1"></span>        <span class="n">Instant</span> <span class="n">instant5</span> <span class="o">=</span> <span class="n">instant4</span><span class="o">.</span><span class="na">minus</span><span class="o">(</span><span class="n">Duration</span><span class="o">.</span><span class="na">ofDays</span><span class="o">(</span><span class="n">5</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">instant5</span><span class="o">);</span>
        <span class="c1">// -----下面是关于LocalDate的用法-----
</span><span class="c1"></span>        <span class="n">LocalDate</span> <span class="n">localDate</span> <span class="o">=</span> <span class="n">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">localDate</span><span class="o">);</span>
        <span class="c1">// 获得2014年的第146天
</span><span class="c1"></span>        <span class="n">localDate</span> <span class="o">=</span> <span class="n">LocalDate</span><span class="o">.</span><span class="na">ofYearDay</span><span class="o">(</span><span class="n">2014</span><span class="o">,</span> <span class="n">146</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">localDate</span><span class="o">);</span> <span class="c1">// 2014-05-26
</span><span class="c1"></span>        <span class="c1">// 设置为2014年5月21日
</span><span class="c1"></span>        <span class="n">localDate</span> <span class="o">=</span> <span class="n">LocalDate</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">2014</span><span class="o">,</span> <span class="n">Month</span><span class="o">.</span><span class="na">MAY</span><span class="o">,</span> <span class="n">21</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">localDate</span><span class="o">);</span> <span class="c1">// 2014-05-21
</span><span class="c1"></span>        <span class="c1">// -----下面是关于LocalTime的用法-----
</span><span class="c1"></span>        <span class="c1">// 获取当前时间
</span><span class="c1"></span>        <span class="n">LocalTime</span> <span class="n">localTime</span> <span class="o">=</span> <span class="n">LocalTime</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="c1">// 设置为22点33分
</span><span class="c1"></span>        <span class="n">localTime</span> <span class="o">=</span> <span class="n">LocalTime</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">22</span><span class="o">,</span> <span class="n">33</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">localTime</span><span class="o">);</span> <span class="c1">// 22:33
</span><span class="c1"></span>        <span class="c1">// 返回一天中的第5503秒
</span><span class="c1"></span>        <span class="n">localTime</span> <span class="o">=</span> <span class="n">LocalTime</span><span class="o">.</span><span class="na">ofSecondOfDay</span><span class="o">(</span><span class="n">5503</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">localTime</span><span class="o">);</span> <span class="c1">// 01:31:43
</span><span class="c1"></span>        <span class="c1">// -----下面是关于localDateTime的用法-----
</span><span class="c1"></span>        <span class="c1">// 获取当前日期、时间
</span><span class="c1"></span>        <span class="n">LocalDateTime</span> <span class="n">localDateTime</span> <span class="o">=</span> <span class="n">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="c1">// 当前日期、时间加上25小时３分钟
</span><span class="c1"></span>        <span class="n">LocalDateTime</span> <span class="n">future</span> <span class="o">=</span> <span class="n">localDateTime</span><span class="o">.</span><span class="na">plusHours</span><span class="o">(</span><span class="n">25</span><span class="o">).</span><span class="na">plusMinutes</span><span class="o">(</span><span class="n">3</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;当前日期、时间的25小时3分之后：&#34;</span> <span class="o">+</span> <span class="n">future</span><span class="o">);</span>
        <span class="c1">// 下面是关于Year、YearMonth、MonthDay的用法示例-----
</span><span class="c1"></span>        <span class="n">Year</span> <span class="n">year</span> <span class="o">=</span> <span class="n">Year</span><span class="o">.</span><span class="na">now</span><span class="o">();</span> <span class="c1">// 获取当前的年份
</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;当前年份：&#34;</span> <span class="o">+</span> <span class="n">year</span><span class="o">);</span> <span class="c1">// 输出当前年份
</span><span class="c1"></span>        <span class="n">year</span> <span class="o">=</span> <span class="n">year</span><span class="o">.</span><span class="na">plusYears</span><span class="o">(</span><span class="n">5</span><span class="o">);</span> <span class="c1">// 当前年份再加5年
</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;当前年份再过5年：&#34;</span> <span class="o">+</span> <span class="n">year</span><span class="o">);</span>
        <span class="c1">// 根据指定月份获取YearMonth
</span><span class="c1"></span>        <span class="n">YearMonth</span> <span class="n">ym</span> <span class="o">=</span> <span class="n">year</span><span class="o">.</span><span class="na">atMonth</span><span class="o">(</span><span class="n">10</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;year年10月：&#34;</span> <span class="o">+</span> <span class="n">ym</span><span class="o">);</span> <span class="c1">// 输出XXXX-10，XXXX代表当前年份
</span><span class="c1"></span>        <span class="c1">// 当前年月再加5年，减3个月
</span><span class="c1"></span>        <span class="n">ym</span> <span class="o">=</span> <span class="n">ym</span><span class="o">.</span><span class="na">plusYears</span><span class="o">(</span><span class="n">5</span><span class="o">).</span><span class="na">minusMonths</span><span class="o">(</span><span class="n">3</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;year年10月再加5年、减3个月：&#34;</span> <span class="o">+</span> <span class="n">ym</span><span class="o">);</span>
        <span class="n">MonthDay</span> <span class="n">md</span> <span class="o">=</span> <span class="n">MonthDay</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;当前月日：&#34;</span> <span class="o">+</span> <span class="n">md</span><span class="o">);</span> <span class="c1">// 输出--XX-XX，代表几月几日
</span><span class="c1"></span>        <span class="c1">// 设置为5月23日
</span><span class="c1"></span>        <span class="n">MonthDay</span> <span class="n">md2</span> <span class="o">=</span> <span class="n">md</span><span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">Month</span><span class="o">.</span><span class="na">MAY</span><span class="o">).</span><span class="na">withDayOfMonth</span><span class="o">(</span><span class="n">23</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;5月23日为：&#34;</span> <span class="o">+</span> <span class="n">md2</span><span class="o">);</span> <span class="c1">// 输出--05-23
</span><span class="c1"></span>    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h1 id="第四章-其它">第四章-其它</h1>
<h2 id="给方法加删除线">给方法加删除线</h2>
<p>可以在方法前加@Deprecated表示这个方法过时，即将删除。</p>
<h2 id="abstract-interface">abstract interface</h2>
<p>如果有人问你为什么有abstract interface 修饰类，答案一定是他看到的这种方式一定是反编译出来的结果。
实际中abstract interface和interface修饰的类没有区别。
接口是特殊的抽象类。</p>
<h2 id="1反射">1反射</h2>
<blockquote>
<p>反射获得类对象的三种方法</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//反射获得类对象 方式1
</span><span class="c1"></span><span class="n">Class</span> <span class="n">classBook</span> <span class="o">=</span> <span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">&#34;com.lsl.entity.Books&#34;</span><span class="o">);</span>
 <span class="c1">//反射获得类对象 方式2、3
</span><span class="c1"></span><span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Books</span><span class="o">&gt;</span> <span class="n">aClass</span> <span class="o">=</span> <span class="n">books</span><span class="o">.</span><span class="na">getClass</span><span class="o">();</span>
<span class="n">Class</span><span class="o">&lt;</span><span class="n">Books</span><span class="o">&gt;</span> <span class="n">booksClass</span> <span class="o">=</span> <span class="n">Books</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
</code></pre></td></tr></table>
</div>
</div><p>利用获得的反射的对象：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//1可以创建对象
</span><span class="c1"></span> <span class="n">Books</span> <span class="n">books</span><span class="o">=</span> <span class="o">(</span><span class="n">Books</span><span class="o">)</span> <span class="n">classBook</span><span class="o">.</span><span class="na">newInstance</span><span class="o">();</span>

<span class="c1">//2获得这个类的方法，字段(私有也可以),
</span><span class="c1">//方法名称，参数.class
</span><span class="c1"></span><span class="n">Method</span> <span class="n">setBookID</span> <span class="o">=</span> <span class="n">classBook</span><span class="o">.</span><span class="na">getMethod</span><span class="o">(</span><span class="s">&#34;setBookID&#34;</span><span class="o">,</span> <span class="n">Integer</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">setBookID</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">books</span><span class="o">,</span><span class="n">25</span><span class="o">);</span><span class="c1">//要执行方法的对象，实参
</span></code></pre></td></tr></table>
</div>
</div><p>还可以获得反射的字段。Constructor类</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//构造方法、也可以传构造方法参数的class
</span><span class="c1"></span><span class="n">Constructor</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Books</span><span class="o">&gt;</span> <span class="n">constructor</span> <span class="o">=</span> <span class="n">aClass</span><span class="o">.</span><span class="na">getConstructor</span><span class="o">();</span>
<span class="c1">//创建对象也是使用newInstance();
</span></code></pre></td></tr></table>
</div>
</div></blockquote>
<h2 id="2泛型">2泛型</h2>
<p><a href="https://www.cnblogs.com/coprince/p/8603492.html">https://www.cnblogs.com/coprince/p/8603492.html</a></p>
<p>泛型类，是在实例化类的时候指明泛型的具体类型；</p>
<p>泛型方法，是在调用方法的时候指明泛型的具体类型 。</p>
<p>?是一种类型实参，可以看做为Number等所有类的父类</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"> <span class="c1">//在泛型类中声明了一个泛型方法，使用泛型E，这种泛型E可以为任意类型。可以类型与T相同，也可以不同。
</span><span class="c1">//由于泛型方法在声明的时候会声明泛型&lt;E&gt;，因此即使在泛型类中并未声明泛型，编译器也能够正确识别泛型方法中识别的泛型。
</span><span class="c1"></span><span class="kd">public</span> <span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="kt">void</span> <span class="nf">show_3</span><span class="o">(</span><span class="n">E</span> <span class="n">t</span><span class="o">){</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">t</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="o">}</span>

<span class="c1">//在泛型类中声明了一个泛型方法，使用泛型T，注意这个T是一种全新的类型，可以与泛型类中声明的T不是同一种类型。
</span><span class="c1"></span><span class="kd">public</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kt">void</span> <span class="nf">show_2</span><span class="o">(</span><span class="n">T</span> <span class="n">t</span><span class="o">){</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">t</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>泛型中方法的返回</strong></p>
<blockquote>
<p>@param tClass 传入的泛型实参</p>
<ul>
<li>@return T 返回值为T类型</li>
<li>说明：</li>
<li>1）public 与 返回值中间<T>非常重要，可以理解为声明此方法为泛型方法。</li>
<li>2）只有声明了<T>的方法才是泛型方法，泛型类中的使用了泛型的成员方法并不是泛型方法。</li>
<li>3）<T>表明该方法将使用泛型类型T，此时才可以在方法中使用泛型类型T。</li>
<li>4）与泛型类的定义一样，此处T可以随便写为任意标识，常见的如T、E、K、V等形式的参数常用于表示泛型。</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//这里虽然用到了泛型，但并不是泛型方法 
</span><span class="c1"></span><span class="kd">public</span> <span class="n">T</span> <span class="nf">getKey</span><span class="o">(){</span>
            <span class="k">return</span> <span class="n">key</span><span class="o">;</span>
        <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Data</span>
<span class="nd">@AllArgsConstructor</span>
<span class="nd">@NoArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ResultObj</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="n">Integer</span> <span class="n">code</span><span class="o">;</span>
    <span class="n">String</span> <span class="n">msg</span><span class="o">;</span>
    <span class="n">T</span> <span class="n">data</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">ResultObj</span><span class="o">(</span><span class="kt">int</span> <span class="n">code</span><span class="o">,</span> <span class="n">String</span> <span class="n">msg</span><span class="o">,</span> <span class="n">T</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">code</span><span class="o">=</span><span class="n">code</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">msg</span><span class="o">=</span><span class="n">msg</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">data</span><span class="o">=</span><span class="n">data</span><span class="o">;</span>
    <span class="o">}</span>
  
    <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="n">ResultObj</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">getSuccess</span><span class="o">(</span><span class="n">T</span> <span class="n">data</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ResultObj</span><span class="o">&lt;&gt;(</span><span class="n">200</span><span class="o">,</span><span class="s">&#34;成功&#34;</span><span class="o">,</span><span class="n">data</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="n">ResultObj</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">getUsing</span><span class="o">(</span><span class="n">T</span> <span class="n">data</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ResultObj</span><span class="o">&lt;&gt;(</span><span class="n">200</span><span class="o">,</span><span class="s">&#34;正在使用中&#34;</span><span class="o">,</span><span class="n">data</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">ResultObj</span> <span class="nf">getFail</span><span class="o">(</span><span class="n">Integer</span> <span class="n">code</span><span class="o">,</span><span class="n">String</span> <span class="n">message</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ResultObj</span><span class="o">(</span><span class="n">code</span><span class="o">,</span><span class="n">message</span><span class="o">,</span><span class="kc">null</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="3自定义注解">3自定义注解</h2>
<p><a href="https://blog.csdn.net/zt15732625878/article/details/100061528">https://blog.csdn.net/zt15732625878/article/details/100061528</a></p>
<p>JDK中有一些元注解，主要有@Target，@Retention,@Document,@Inherited用来修饰注解。</p>
<p><strong>@Target</strong>
表明该注解可以应用的java元素类型</p>
<table>
<thead>
<tr>
<th>Target类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>ElementType.TYPE</td>
<td>应用于类、接口（包括注解类型）、枚举</td>
</tr>
<tr>
<td>ElementType.FIELD</td>
<td>应用于属性（包括枚举中的常量）</td>
</tr>
<tr>
<td>ElementType.METHOD</td>
<td>应用于方法</td>
</tr>
<tr>
<td>ElementType.PARAMETER</td>
<td>应用于方法的形参</td>
</tr>
<tr>
<td>ElementType.CONSTRUCTOR</td>
<td>应用于构造函数</td>
</tr>
<tr>
<td>ElementType.LOCAL_VARIABLE</td>
<td>应用于局部变量</td>
</tr>
<tr>
<td>ElementType.ANNOTATION_TYPE</td>
<td>应用于注解类型</td>
</tr>
<tr>
<td>ElementType.PACKAGE</td>
<td>应用于包</td>
</tr>
<tr>
<td>ElementType.TYPE_PARAMETER</td>
<td>1.8版本新增，应用于类型变量）</td>
</tr>
<tr>
<td>ElementType.TYPE_USE</td>
<td>1.8版本新增，应用于任何使用类型的语句中（例如声明语句、泛型和强制转换语句中的类型）</td>
</tr>
</tbody>
</table>
<p><strong>@Retention</strong>
表明该注解的生命周期</p>
<table>
<thead>
<tr>
<th>生命周期类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>RetentionPolicy.SOURCE</td>
<td>编译时被丢弃，不包含在类文件中</td>
</tr>
<tr>
<td>RetentionPolicy.CLASS</td>
<td>JVM加载时被丢弃，包含在类文件中，默认值</td>
</tr>
<tr>
<td>RetentionPolicy.RUNTIME</td>
<td>由JVM 加载，包含在类文件中，在运行时可以被获取到</td>
</tr>
</tbody>
</table>
<p><strong>@Document</strong>
表明该注解标记的元素可以被Javadoc 或类似的工具文档化</p>
<p><strong>@Inherited</strong>
表明使用了@Inherited注解的注解，所标记的类的子类也会拥有这个注解</p>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">卢森林</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2020-08-02
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      
      <nav class="post-nav">
        <a class="prev" href="/post/idea%E4%BD%BF%E7%94%A8/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">IDEA使用.md</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/linux%E6%9C%8D%E5%8A%A1%E5%99%A8/">
            <span class="next-text nav-default">Linux服务器.md</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:1115759748@qq.com" class="iconfont icon-email" title="email"></a>
      <a href="https://gitee.com/lusenlin1997" class="iconfont icon-stack-overflow" title="stack-overflow"></a>
      <a href="http://https://github.com/13277112287" class="iconfont icon-github" title="github"></a>
      <a href="http://localhost:1313" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="https://13277112287.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">卢森林</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.d7b7ada643c9c1a983026e177f141f7363b4640d619caf01d8831a6718cd44ea.js"></script>








</body>
</html>
